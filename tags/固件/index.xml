<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>固件 on Bravoooooooo</title>
    <link>http://localhost:1313/tags/%E5%9B%BA%E4%BB%B6/</link>
    <description>Recent content in 固件 on Bravoooooooo</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <lastBuildDate>Thu, 24 Feb 2022 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/%E5%9B%BA%E4%BB%B6/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>记录一下小米AX3600刷机OpenWrt固件</title>
      <link>http://localhost:1313/posts/2022/02/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B%E5%B0%8F%E7%B1%B3ax3600%E5%88%B7%E6%9C%BAopenwrt%E5%9B%BA%E4%BB%B6/</link>
      <pubDate>Thu, 24 Feb 2022 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/posts/2022/02/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B%E5%B0%8F%E7%B1%B3ax3600%E5%88%B7%E6%9C%BAopenwrt%E5%9B%BA%E4%BB%B6/</guid>
      <description>&lt;p&gt;记录一下自己刷机路由器固件，中途过程比较坎坷。&lt;/p&gt;&#xA;&lt;p&gt;本次记录使用的所有工具和文件&lt;a href=&#34;https://wwt.lanzoum.com/iCcsK01slxxc&#34;&gt;下载地址&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;开启ax3600的ssh&#34;&gt;开启AX3600的SSH&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;AX3600在固件版本为1.0.17的时候才能够开启SSH，首先得将路由器降级到1.0.17&lt;/li&gt;&#xA;&lt;li&gt;复制路由器后台网址中的”STOK=“的后面的数据备用&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;获取SSH权限：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;http://192.168.31.1/cgi-bin/luci/;stok=将之前保存的stok后面的数据粘贴过来替换/api/misystem/set_config_iotdev?bssid=Xiaomi&amp;amp;user_id=longdike&amp;amp;ssid=-h%3B%20nvram%20set%20ssh_en%3D1%3B%20nvram%20commit%3B%20sed%20-i%20&amp;#39;s%2Fchannel%3D.*%2Fchannel%3D%5C%22debug%5C%22%2Fg&amp;#39;%20%2Fetc%2Finit.d%2Fdropbear%3B%20%2Fetc%2Finit.d%2Fdropbear%20start%3B&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;复制到浏览器打开，如果显示&lt;code&gt;{&amp;quot;code&amp;quot;:0}&lt;/code&gt;，就说明成功了&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;更改root密码为admin：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;http://192.168.31.1/cgi-bin/luci/;stok=将之前保存的stok后面的数据粘贴过来替换/api/misystem/set_config_iotdev?bssid=Xiaomi&amp;amp;user_id=longdike&amp;amp;ssid=-h%3B%20echo%20-e%20&amp;#39;admin%5Cnadmin&amp;#39;%20%7C%20passwd%20root%3B&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;复制到浏览器打开，如果显示&lt;code&gt;{&amp;quot;code&amp;quot;:0}&lt;/code&gt;，就说明成功了&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;开始刷机&#34;&gt;开始刷机&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;由于小米路由器系统只有SCP协议，所以需要在MobaXterm里更改文件的传输协议&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;然后使用MobaXterm连接192.168.31.1:22，账号：root，密码：admin&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;cd到/tmp目录下，把openwrt-ipq807x-generic-xiaomi_ax3600-squashfs-nand-factory.ubi这个文件上传到该目录下&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;输入以下指令&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set flag_last_success&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set flag_boot_rootfs&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set flag_boot_success&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set flag_try_sys1_failed&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set flag_try_sys2_failed&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set boot_wait&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;on&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set uart_en&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set telnet_en&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set ssh_en&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram commit&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; ubiformat /dev/mtd13 -y -f /tmp/openwrt-ipq807x-generic-xiaomi_ax3600-squashfs-nand-factory.ubi&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set flag_last_success&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram set flag_boot_rootfs&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nvram commit&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; reboot&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;由于小米路由器是双分区，以上操作是在另一个分区刷机OpenWrt固件，然后并更改默认启动的分区，原版官方固件处在另一分区，还依然存在，想刷回去的话随时都可以，输入以下指令即可。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
